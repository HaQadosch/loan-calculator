(this.webpackJsonpcalculator=this.webpackJsonpcalculator||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),l=(a(24),a(9)),u=(a(25),a(26),function(e){var t=e.amount,a=e.duration,n=e.setAmount,o=e.setDuration;return r.a.createElement("article",{id:"loan-setting"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"amount"},"Amount requested"),r.a.createElement("input",{type:"number",name:"amount",id:"amount",min:"1000",max:"200000",value:t,step:"1000",onChange:function(e){var t=e.target.value;n(Number.parseInt(t,10))},required:!0}),r.a.createElement("span",null,"(in \xa3)"),r.a.createElement("label",{htmlFor:"duration"},"Duration"),r.a.createElement("input",{type:"number",name:"duration",id:"duration",min:"1",max:"60",value:a,step:"1",onChange:function(e){var t=e.target.value;o(Number.parseInt(t,10))},required:!0}),r.a.createElement("span",null,"(in months)")))}),c=a(48),m=a(52),s=a(55),d=a(56),f=a(50),p=a(53),h=a(54),v=a(51),g=function(e){var t=e.premium,a=e.title,n=e.duration,o=e.amount,i=r.a.useContext(x),u=r.a.useState(3),c=Object(l.a)(u,2),m=c[0],s=c[1],d=0===t?i.revolving_credit_facility:i.business_loan,f=d.amount_min<=o&&o<=d.amount_max,p=!(d.duration_min<=n&&n<=d.duration_max&&f),h=n;h=Math.min(h,d.duration_max),h=Math.max(h,d.duration_min);var v=o;return v=Math.min(v,d.amount_max),v=Math.max(v,d.amount_min),r.a.createElement("section",{className:p?"disabled":"enabled"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"rate"},"Interest rate"),r.a.createElement("input",Object.assign({type:"number",name:"rate",id:"rate",min:"1",max:"100",value:m,step:"1",onChange:function(e){var t=e.target.value;s(Number.parseInt(t,10))},required:!0},p?{readOnly:!0,disabled:!0}:{})),r.a.createElement("span",null,"(in \xa3)")),r.a.createElement(y,{premium:t,duration:h,amount:v,rate:m}),r.a.createElement("h2",null,a))},E=function(e){var t=e.amount,a=e.duration;return r.a.createElement("article",{id:"rcf-calculator"},r.a.createElement(g,{premium:0,title:"Revolving Credit Facility",duration:a,amount:t}))},b=function(e){var t=e.amount,a=e.duration;return r.a.createElement("article",{id:"bl-calculator"},r.a.createElement(g,{premium:10,title:"Business Loan",duration:a,amount:t}))},w=Object(c.a)({table:{minWidth:350}});function y(e){var t=e.premium,a=e.amount,n=e.duration,o=e.rate,i=w(),l=function(e){var t=e.amount,a=e.duration,n=e.premium,r=e.rate,o=function(e){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0}).format(e)},i=new Date,l=t,u=0,c=0,m=new Array(a).fill(1).map((function(e,m){var s=function(e,t){var a=e.getMonth()+t,n=new Date;n.setMonth(a);var r=n.toISOString(),o=new Date(r);return new Intl.DateTimeFormat("en-GB",{month:"2-digit",day:"2-digit",year:"numeric"}).format(o)}(i,m),d=t/a,f=o(d),p=l*(.01*r)+(0===m?t*(.01*n):0);u+=p,l-=d;var h=o(p),v=p+d;return c+=v,{date:s,principal:f,interest:h,total:o(v)}})),s={date:"Total",principal:o(t),interest:o(u),total:o(c)};return m.push(s),console.log({payments:m}),m}({amount:a,duration:n,premium:t,rate:o});return r.a.createElement(f.a,{component:v.a},r.a.createElement(m.a,{className:i.table,size:"small","aria-label":"a dense table"},r.a.createElement(p.a,null,r.a.createElement(h.a,null,r.a.createElement(d.a,null,"Repayment date"),r.a.createElement(d.a,{align:"right"},"Principal"),r.a.createElement(d.a,{align:"right"},"Interest"),r.a.createElement(d.a,{align:"right"},"Total repayment"))),r.a.createElement(s.a,null,l.map((function(e){var t=e.date,a=e.principal,n=e.interest,o=e.total;return r.a.createElement(h.a,{key:t},r.a.createElement(d.a,{component:"th",scope:"row"},t),r.a.createElement(d.a,{align:"right"},a),r.a.createElement(d.a,{align:"right"},n),r.a.createElement(d.a,{align:"right"},o))})))))}var _={business_loan:{amount_max:2e5,amount_min:1e4,duration_max:60,duration_min:1},revolving_credit_facility:{amount_max:15e4,amount_min:1e3,duration_max:12,duration_min:1}},x=r.a.createContext(_),k=function(){var e=r.a.useState(1e4),t=Object(l.a)(e,2),a=t[0],n=t[1],o=r.a.useState(4),i=Object(l.a)(o,2),c=i[0],m=i[1],s=r.a.useState(_),d=Object(l.a)(s,2),f=d[0],p=d[1];return r.a.useEffect((function(){fetch("http://www.mocky.io/v2/5d4aa9e93300006f000f5ea9").then((function(e){return e.json()})).then((function(e){return p(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h1",null,"Your loan repayment plans")),r.a.createElement(x.Provider,{value:f},r.a.createElement(u,{amount:a,duration:c,setAmount:n,setDuration:m}),r.a.createElement(E,{amount:a,duration:c}),r.a.createElement(b,{amount:a,duration:c})),r.a.createElement("footer",null,"Talk to a real person ",r.a.createElement("span",{role:"img","aria-label":"phone"},"\ud83d\udcde")," 020 3778 0274"))},S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(k,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/loan-calculator",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/loan-calculator","/service-worker.js");S?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):j(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):j(t,e)}))}}()}},[[19,1,2]]]);
//# sourceMappingURL=main.406b2416.chunk.js.map